import { useState } from 'react'
import Head from 'next/head'
import Link from 'next/link'
import HeroPages from "../components/layout/HeroPages"
import FeatureCard from './../components/cards/FeatureCard';
import SectionCard from './../components/cards/SectionCard';
import ArticleCard from './../components/cards/ArticleCard';
import HeadSetion from './../components/HeadSetion';
import { fetchApi, postApi } from './../utils/handelApi';
import HandelError from './../components/HandelError';
import { Swiper, SwiperSlide } from "swiper/react";
import "swiper/css";
import { toast } from 'react-toastify';


export default function Home({ newArticles, articlesVisits, articlesNomination, categorys, error }) {

  const categorysMaping = categorys.map((category) => {
    return (
      <div className="col-sm-6 col-md-4  mt-5" key={category._id}>
        <SectionCard name={category.name} image={category.image} />
      </div>
    )
  })

  const categorysList = () => {
    if (categorys.length === 0) {
      return <HandelError image="writing-room.svg" text="Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ù‚Ø³Ø§Ù… Ø¹Ù„ÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ù†" />
    } else {
      return <div className="row">{categorysMaping}</div>
    }
  }

  const [email, setEmail] = useState('')

  const subscribe = () => {
    const rgexEmail = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    if(String(email).toLowerCase().match(rgexEmail)) {
      const subscribePromise = postApi('subscribe/create', {email: email})
      toast.promise(
        subscribePromise,{
          pending: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ù…Ù†ØµÙ‡ Ø§Ù„Ø§Ù†',
          success: 'ØªÙ… Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ù…Ù†ØµÙ‡ Ø¨Ù†Ø¬Ø§Ø­ğŸ‘Œ',
          error:  {
            render({data}){
              // When the promise reject, data will contains the error
              return data
            }
          }
        },{position: toast.POSITION.BOTTOM_RIGHT}
        )
    } else {
      toast.warn('Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ ÙŠØ¬Ø¨ Ø§Ù† ÙŠÙƒÙˆÙ† Ø¨Ø±ÙŠØ¯ Ø§ÙƒØªØ±ÙˆÙ†ÙŠ', {
        position: toast.POSITION.BOTTOM_RIGHT
      });
    }
  }


  return (
    <>
      <Head>
        <title>Ù…ÙˆÙ‚Ø¹ Ù…ØµØ§Ø¯Ø±</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <HeroPages
        title="Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ù…ÙˆÙ‚Ø¹ Ù…ØµØ§Ø¯Ø±"
        text="Ù‡Ù„ ØªØ¨Ø­Ø« Ø¹Ù† Ù…ÙƒØ§Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„ÙŠ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ø± ÙˆØ§Ù„Ù…Ø±Ø§Ø¬Ø¹ ÙÙŠ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„ØªÙŠ ØªÙ‡ØªÙ… Ø¨Ù‡Ø§ ØªØ¬Ø¯Ù‡ Ø¹Ù„ÙŠ Ù…ÙˆÙ‚Ø¹ Ù…ØµØ§Ø¯Ø± ÙˆÙŠÙˆÙØ± Ø¹Ù„ÙŠÙƒ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ø¨Ø­Ø« ÙˆØªØ¶ÙŠØ¹ Ø§Ù„ÙˆÙ‚Øª ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ù†Ø­Ù† Ù†ÙˆÙØ± ÙƒÙ„ Ù‡Ø°Ø§ Ù„Ø¯ÙŠÙ†Ø§ Ø¹Ù„ÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙƒÙ„ Ù…Ø§ Ø¹Ù„ÙŠÙƒ ÙØ¹Ù„Ù‡ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ³ÙˆÙ ØªØ¬Ø¯ ÙƒÙ„ Ù…Ø§ØªØ±ÙŠØ¯Ù‡      "
        search={true} full={true} />

      <section className='py-5'>
        <div className="container">
          <HeadSetion
            title="Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªÙŠ ÙŠÙ‚Ø¯Ù…Ù‡Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØŸ"
            text="Ù†Ø­Ù† Ù†ÙˆÙØ± Ù„Ùƒ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª ÙˆØ§Ù„ØªØ³Ù‡ÙŠÙ„Ø§Øª ØªØ³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø¹Ù…Ù„Ùƒ ÙˆØ¯Ø±Ø§Ø³ØªÙƒ,Ù„Ø°Ø§Ù„Ùƒ Ù†ÙˆÙØ± Ù„Ùƒ ÙƒÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª"
          />
          <div className="row mt-4">
            <div className="col-xs-12 col-md-6 col-lg-4 mt-3">
              <FeatureCard
                icon="fi-rr-browser"
                title="Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø§ÙƒØªØ±ÙˆÙ†ÙŠÙ‡"
                text="Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø§ÙƒØªØ±ÙˆÙ†ÙŠÙ‡ Ø§Ù„Ù…ÙÙŠØ¯Ù‡ Ù„Ùƒ Ø§Ù„ØªÙŠ Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†Ù‡Ø§ ÙˆØªÙÙŠØ±Ù‡Ø§ ÙƒÙ„Ù‡Ø§ Ù…Ù† Ø§Ø¬Ù„Ùƒ ÙˆØ§Ù„ØªÙŠ Ø¨Ø¯ÙˆØ±Ù‡Ø§ ØªØ³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ù‡Ø§Ù…"
              />
            </div>
            <div className="col-xs-12 col-md-6 col-lg-4 mt-3">
              <FeatureCard
                icon="fi-rr-smartphone"
                title="ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ "
                text="Ø¨ÙƒÙ„ ØªØ£ÙƒÙŠØ¯ Ø£Ù† Ø§ØºÙ„Ø¨Ù†Ø§ Ø§ØµØ¨Ø­ ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙˆØ¨ÙŠÙ„ Ø§Ù„Ù…Ø­Ù…ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ÙŠÙˆÙ…ÙŠ ÙˆÙ…ØªÙƒØ±Ø± ,Ù†Ø­Ù† Ø¨Ø¯ÙˆØ±Ù†Ø§ Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙÙŠØ¯Ø© Ø§Ù„ÙŠÙƒ"
              />
            </div>
            <div className="col-xs-12 col-md-6 col-lg-4 mt-3">
              <FeatureCard
                icon="fi-rr-book"
                title="Ø§Ù„ÙƒØªØ¨"
                text="Ø§Ù„ÙƒØªØ¨ Ø§Ù‚Ø¯Ù… Ø·Ø±Ù‚ Ø§Ù„Ù…Ø¹Ø±ÙÙ‡ Ø§Ù„ØªÙŠ Ø§Ø³ØªØ¹Ù…Ù„Ù‡Ø§ Ø§Ù„Ø§Ù†Ø³Ø§Ù† Ù…Ù† Ø§Ø¬Ù„ Ø§Ù„ØªØ¹Ù„Ù… ÙˆÙ†Ù‚Ù„ ÙˆØ§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„ÙŠ Ù…Ù† ÙŠØ±ÙŠØ¯ Ø§Ù„ØªØ¹Ù„Ù… Ù…Ù†Ù‡Ø§,Ù†Ø±Ø´Ø­ Ù„Ùƒ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„ÙƒØªØ¨"
              />
            </div>
            <div className="col-xs-12 col-md-6 col-lg-4 mt-3">
              <FeatureCard
                icon="fi-rr-computer"
                title="Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±"
                text="Ù†Ù‚Ø¯Ù… Ø§Ù„ÙŠÙƒ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø§Ù„ØªÙŠ ØªØ³Ø§Ø¹Ø¯Ùƒ ÙˆØªÙ†Ø¬Ø² Ù„Ùƒ Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØªØ³ØªØ®Ø¯Ù…Ù‡Ø§ ÙÙŠ Ø¹Ù…Ù„Ùƒ ÙˆØ§Ø³ØªØ®Ø¯Ù…Ø§ØªÙƒ Ø§Ù„Ù…Ø®ØªÙ„ÙÙ‡ ÙÙŠ Ø­ÙŠØ§ØªÙƒ"
              />
            </div>
            <div className="col-xs-12 col-md-6 col-lg-4 mt-3">
              <FeatureCard
                icon="fi-rr-play-alt"
                title="Ù‚Ù†ÙˆØ§Øª ÙŠÙˆØªÙŠÙˆØ¨"
                text="Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨ Ø§ÙƒØ¨Ø± Ù…Ù†ØµÙ‡ Ø¹Ù„ÙŠ Ø§Ù„Ø§Ø·Ù„Ø§Ù‚ ØªÙ‚Ø¯Ù… ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø¹Ù„ÙŠ Ù…Ø³ØªÙˆÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… ÙˆÙŠØªÙˆØ¬Ø¯ Ø¨Ù‡ ØµÙ†Ø§Ø¹ Ù…Ø­ØªÙˆÙŠ Ø¬ÙŠØ¯ÙŠÙ† ÙÙŠ ÙƒØ§ÙØ© Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙÙ‡"
              />
            </div>
            <div className="col-xs-12 col-md-6 col-lg-4 mt-3">
              <FeatureCard
                icon="fi-rr-diploma"
                title="Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø§Ù„Ù…Ø®ØªÙ„ÙÙ‡"
                text="Ù„Ø¯ÙŠÙ†Ø§ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…Ø­ØªÙˆÙŠ Ø§Ù„Ù…ØªÙ†ÙˆØ¹ ÙˆØ§Ù„Ù…ÙÙŠØ¯ Ù…Ø«Ù„ Ø§Ù„Ø§ÙÙƒØ§Ø± Ø§Ù„Ø¬ÙŠØ¯Ù‡ ÙˆÙ†Ø±Ø´Ø­ Ø¹Ù„ÙŠÙƒ Ø§Ø´ÙŠØ§Ø¡ Ù…ØªÙ†ÙˆØ¹Ù‡ ØªØ³Ø§Ø¹Ø¯Ùƒ"
              />
            </div>
          </div>
        </div>
      </section>

      {/* start category block */}
      <section className="bg-light py-4">
        <div className="container">
          <HeadSetion
            title="Ø§Ù„Ø§Ù‚Ø³Ø§Ù… Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ù‡ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹"
            text="Ù†Ø­Ù† Ù†ÙˆÙØ± Ø§Ù„ÙŠÙƒ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ø§Ù‚Ø³Ø§Ù… ÙÙŠ Ø§ØºÙ„Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª,ÙƒÙ„ Ù…Ø§ Ø¹Ù„ÙŠÙƒ ÙØ¹Ù„Ù‡ Ù‡Ùˆ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠ Ø§Ø­Ø¯ÙŠ Ø§Ù„Ø§Ù‚Ø³Ø§Ù… Ù„ØªØ¬Ø¯ ÙƒÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ù‡ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù…"
          />
            {error
              ? <HandelError image="server_down.svg" text="ØªÙˆØ¬Ø¯ Ù…Ø´ÙƒÙ„Ù‡ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø§Ù†" />
              : categorysList()
            }
          
        </div>
      </section>

      {/* start new Articles block */}
      <section className="bg-light py-4">
        <div className="container">
          <HeadSetion
            title='Ø§Ø­Ø¯Ø« Ù…Ù‚Ø§Ù„Ø§Øª Ù„Ø¯ÙŠÙ†Ø§'
            text='Ù‡Ù†Ø§ ØªØ¬Ø¯ Ø§Ø­Ø¯Ø« Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„ØªÙŠ Ø¶ÙÙ†Ø§Ù‡Ø§ Ù…Ø¤Ø®Ø±Ø§ Ø¹Ù„ÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹,Ù‚Ù… Ø¨ÙŠ ØªÙÙ‚Ø¯Ù‡Ø§ ÙˆØ§Ù„Ù‚ÙŠ Ù†Ø¸Ø±Ø§ Ø¹Ù„ÙŠÙ‡Ù… Ù„ØªØ¬Ø¯ Ù…Ø§ ÙŠÙ‡Ù…Ùƒ'
          />
          <Swiper
            breakpoints={{
              0: {
                slidesPerView: 1,
                spaceBetween: 30,
              },
              768: {
                slidesPerView: 2,
                spaceBetween: 20,
              },
            }}
            pagination={{ clickable: true, }}
            className="py-5"
          >
            {error
              ? <HandelError image="server_down.svg"  text="ØªÙˆØ¬Ø¯ Ù…Ø´ÙƒÙ„Ù‡ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø§Ù†" />
              : newArticles.length === 0 
              ? <HandelError image="online-articles.svg" text='Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ù„ÙŠ Ø§Ù„Ù…Ù†ØµÙ‡ Ø§Ù„Ø§Ù†' />
                : newArticles.map(article => {
                  return (
                    <SwiperSlide key={article._id}>
                      <ArticleCard articleData={article} />
                    </SwiperSlide>
                  )
                })
            }
          </Swiper>
        </div>
      </section>

      {/* start articles Nomination block */}
      <section className="bg-light py-4">
        <div className="container">
          <HeadSetion
            title='Ù…Ù‚Ø§Ù„Ø§Øª Ù…Ø±Ø´Ø­Ù‡ Ù„Ùƒ'
            text='Ù†Ø±Ø´Ø­ Ø§Ù„ÙŠÙƒ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„ØªÙŠ Ù†Ø±Ø§ Ø§Ù†Ù‡Ø§ Ø³ÙˆÙ ØªÙÙŠØ¯Ùƒ ÙˆÙ„Ø§ ØºÙ†Ø§Ø¡ Ø¹Ù† Ø§Ù„Ù…Ø­ØªÙˆÙŠ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ù‡Ø§ Ù„Ø°Ø§Ù„Ùƒ Ù†Ù†ØµØ­Ùƒ Ø§Ù† ØªÙ„Ù‚ÙŠ Ø¹Ù„ÙŠÙ‡Ø§ Ù†Ø¸Ø±Ù‡'
          />

          <Swiper
            breakpoints={{
              0: {
                slidesPerView: 1,
                spaceBetween: 30,
              },
              768: {
                slidesPerView: 2,
                spaceBetween: 20,
              },
            }}
            pagination={{ clickable: true, }}
            className="py-5"
          >
            {error
              ? <HandelError image="server_down.svg"  text="ØªÙˆØ¬Ø¯ Ù…Ø´ÙƒÙ„Ù‡ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø§Ù†" />
              : articlesNomination.length === 0 
              ? <HandelError image="online-articles.svg" text='Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ù„ÙŠ Ø§Ù„Ù…Ù†ØµÙ‡ Ø§Ù„Ø§Ù†' />
                : articlesNomination.map(article => {
                  return (
                    <SwiperSlide key={article._id}>
                      <ArticleCard articleData={article} />
                    </SwiperSlide>
                  )
                })
            }


          </Swiper>

        </div>
      </section>
      
      {/* start articles Visits block */}
      <section className="bg-light py-5">
        <div className="container">
          <HeadSetion
            title='Ø§ÙƒØ«Ø± Ø§Ù„Ù…Ø§Ù‚Ø§Ù„Ø§Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡'
            text='Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„ØªÙŠ Ø­ØµÙ„Øª Ø¹Ù„ÙŠ Ø§Ø¹Ù„ÙŠ Ù†Ø³Ø¨ Ø²ÙŠØ§Ø±Ù‡ Ù„Ø¯ÙŠÙ†Ø§ ÙˆØ­ØµÙ„Øª Ø¹Ù„ÙŠ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ø§Ø¹Ø¬Ø§Ø¨ Ù„Ø¯ÙŠ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ù‚Ù… Ø¨Ø²ÙŠØ§Ø±ØªÙ‡Ø§ ÙˆØ§Ù„Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ù†Ù‡Ø§'
          />

          <Swiper
            breakpoints={{
              0: {
                slidesPerView: 1,
                spaceBetween: 30,
              },
              768: {
                slidesPerView: 2,
                spaceBetween: 20,
              },
            }}
            pagination={{ clickable: true, }}
            className="py-5"
          >
            {error
              ? <HandelError image="server_down.svg"  text="ØªÙˆØ¬Ø¯ Ù…Ø´ÙƒÙ„Ù‡ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø§Ù†" />
              : articlesVisits.length === 0 
              ? <HandelError image="online-articles.svg" text='Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ù„ÙŠ Ø§Ù„Ù…Ù†ØµÙ‡ Ø§Ù„Ø§Ù†' />
                : articlesVisits.map(article => {
                  return (
                    <SwiperSlide key={article._id}>
                      <ArticleCard articleData={article} />
                    </SwiperSlide>
                  )
                })
            }
          </Swiper>
        </div>
      </section>
      <section className="py-5">
        <div className="container py-4 d-flex align-items-center">
          <div className="row justify-content-center">
            <div className="col-md-11 text-center">
              <h5 className='fs-h2 text-primary mb-2'>Ø£Ø´ØªØ±Ùƒ ÙÙŠ Ù…ÙˆÙ‚Ø¹ Ù…ØµØ§Ø¯Ø± Ù„ÙŠØµÙ„Ùƒ ÙƒÙ„ Ø¬Ø¯ÙŠØ¯</h5>
              <p className="fs-p2 lh-md">Ø§Ø°Ø§ ÙƒÙˆÙ†Øª ØªØ±ÙŠØ¯ Ù…ØªØ§Ø¨Ø¹Ø© ÙƒÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„ØªÙŠ Ù†Ù†Ø´Ø±Ù‡Ø§ ÙÙŠ Ø§Ø­Ø¯ Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„ØªÙŠ ØªÙ‡ØªÙ… Ø¨Ù‡Ø§ ÙƒÙ„ Ù…Ø§ Ø¹Ù„ÙŠÙƒ ÙØ¹Ù„Ù‡ Ø§Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø§ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø§Ù‚Ø³Ø§Ù… Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø§Ù† ÙŠØµÙ„Ùƒ ÙƒÙ„ Ø¬Ø¯ÙŠØ¯ Ø¹Ù†Ù‡Ø§ ÙˆÙ†Ø­Ù† Ø³ÙˆÙ Ù†Ø±Ø³Ù„ Ù„Ùƒ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§ÙˆÙ„ Ø¨ÙŠ Ø§ÙˆÙ„ Ù…Ù† Ø§Ø¬Ù„Ùƒ <Link href="/privacy">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠÙ‡</Link></p>
              <div className="search mt-4">
                  <input 
                    type="email" 
                    name="email"
                    className="form-field" 
                    placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø§ÙƒØªØ±ÙˆÙ†ÙŠ"
                    value={email}
                    onChange={(e) => setEmail(e.target.value)}
                  />
                  <button className="btn-primary" onClick={subscribe}>Ø§Ø´ØªØ±Ùƒ</button>
                </div>
            </div>
          </div>
        </div>
      </section>


    </>
  )
}


export async function getServerSideProps() {
  try {
    const { categorys } = await fetchApi('categorys');
    const { newArticles } = await fetchApi("articles/new");
    const { articlesVisits } = await fetchApi("articles/visits");
    const { articlesNomination } = await fetchApi("articles/nomination");
    return {
      props: {
        newArticles,
        articlesVisits,
        articlesNomination,
        categorys,
        error: null,
      },
    };
  } catch (error) {
    return {
      props: {
        newArticles: [],
        articlesVisits: [],
        articlesNomination: [],
        categorys: [],
        error,
      },
    };
  }
}